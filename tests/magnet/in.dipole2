# Point dipoles in a 2d box

log dipole2.log

units		lj
atom_style	hybrid sphere dipole mdpd
dimension	3
boundary p p p

region        box  block -10 10 -10 10 -10 10 units box
create_box	1 box

region        drop   sphere 0 0 0 6
create_atoms  1 random $(round(6.1*3.1415*4*4*4*4/3)) 2021 drop

comm_modify vel yes cutoff 2.5



# need both mass settings due to hybrid atom style

mass		1 1.0
set		group all mass 1.0
set		group all dipole/random 98934 0.12
velocity	all create 1 87287 mom yes

pair_style hybrid/overlay mdpd/rhosum mdpd 1.0 1.0 65689 lj/cut/dipole/cut 2.0
pair_coeff  *  *   mdpd/rhosum  0.75
pair_coeff  *  *   mdpd  -50.0  25.0  4.5  1.0  0.75


pair_coeff	* * lj/cut/dipole/cut 0.0 1.0

neighbor	0.5 bin
neigh_modify	every 1 delay 0 check yes

# min_style cg
# minimize 0 0 1000 10000

### MOD

fix field all efield 0 100 0

###

fix		1 all nve/sphere  update dipole
# fix         2 all mvv/dpd 0.65 update dipole

timestep	0.01

# compute		erot all erotate/sphere
thermo_style	custom step temp  press
thermo		200

# thermo_modify lost ignore

dump		1 all custom 100 dump.dipole2 id type x y z mux muy muz fx fy fz


run		20000
